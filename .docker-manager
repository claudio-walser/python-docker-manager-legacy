containerDefaults:
  dns: 172.17.0.1
  restart: always


container:

  elasticsearch-claudio:
    maxContainers: 1
    image: nshou/elasticsearch-kibana
    sourceVolumes:
      - source: /home/claudio/docker/elasticsearch-base
        target: /home/claudio/docker/elasticsearch-claudio
    volumes:
      - source: /home/claudio/docker/elasticsearch-claudio/elasticsearch
        target: /home/elasticsearch/elasticsearch/data
        uid: 1000
    expose:
      - 9200
      - 5601


  elasticsearch-heinz:
    maxContainers: 1
    image: nshou/elasticsearch-kibana
    sourceVolumes:
      - source: /home/claudio/docker/elasticsearch-base
        target: /home/claudio/docker/elasticsearch-heinz
    volumes:
      - source: /home/claudio/docker/elasticsearch-heinz/elasticsearch
        target: /home/elasticsearch/elasticsearch/data
        uid: 1000
    expose:
      - 9200
      - 5601


  icinga:
    maxContainers: 1
    image: jordan/icinga2:latest
    volumes:
      - source: /home/claudio/docker/icinga/icingaweb2/sessions
        target: /var/lib/php5/sessions
        uid: 33
      - source: /home/claudio/docker/icinga/mysql
        target: /var/lib/mysql
        uid: 104
      - source: /home/claudio/docker/icinga/icinga2
        target: /var/lib/icinga2
        uid: 105
    expose:
      - 80
    nginx:
      backendPort: 80


  jenkins:
    maxContainers: 1
    image: my-jenkins:latest
    volumes:
      - source: /home/claudio/docker/jenkins
        target: /var/jenkins_home
        uid: 1000
    expose:
      - 8080

    nginx:
      backendPort: 8080

  reprepro:
    maxContainers: 1
    image: bbinet/reprepro:latest
    volumes:
      - source: /home/claudio/docker/reprepro/data
        target: /data
      - source: /home/claudio/docker/reprepro/config
        target: /config
    environment:
      - RPP_DISTRIBUTIONS="wdev;wprod;jdev;jprod"
      - RPP_CODENAME_wprod="wheezy-prod"
      - RPP_CODENAME_jdev="jessie-dev"
      - RPP_CODENAME_jprod="jessie-prod"
      - RPP_ARCHITECTURES_wdev="amd64 armhf source"
      - RPP_ARCHITECTURES_wprod="amd64 armhf source"
      - RPP_ARCHITECTURES_jdev="amd64 armhf source"
      - RPP_ARCHITECTURES_jprod="amd64 armhf source"
      - RPP_INCOMINGS="in_wheezy;in_jessie"
      - RPP_ALLOW_in_wheezy="stable>wheezy-dev"
      - RPP_ALLOW_in_jessie="stable>jessie-dev"
    expose:
      - 22

  web-heinz:
    maxContainers: 1
    image: php:7.1.1-apache
    volumes:
      - source: /home/claudio/docker/web-heinz
        target: /var/www/html
        uid: 33

    expose:
      - 80

    nginx:
      backendPort: 80
